<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comics | Left Unattended</title>
  <meta name="description" content="Seasonal greeting card illustrations by Jen Comstock. Holiday favorites and everyday delights.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <a href="index.html" class="site-logo">Left Unattended</a>
      <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <nav class="main-nav" role="navigation">
        <a href="workshops.html">Workshops</a>
        <a href="comics.html" class="active">Comics</a>
        <a href="pastry.html">Pastry</a>
        <a href="shop.html">Shop</a>
        <a href="about.html">About</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    <div class="container">
      <!-- Page Header -->
      <header class="page-header">
        <img src="assets/images/headers/Comics_Header.png" alt="Comic greeting cards spread on table" class="page-header-image">
        <h1>Comics</h1>
        <p>Seasonal greeting card illustrations featuring animals, food, and gentle humor. Holiday favorites and everyday delights.</p>
      </header>

      <!-- Commission CTA -->
      <section class="cta-section">
        <p><strong>Looking for a custom illustration?</strong> I'm available for commissions.</p>
        <a href="about.html#contact" class="btn btn-secondary">Get in touch</a>
      </section>

      <!-- Filter Bar -->
      <div class="filter-bar">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="Valentine's Day">Valentine's Day</button>
        <button class="filter-btn" data-filter="Easter">Easter</button>
        <button class="filter-btn" data-filter="Mother's Day">Mother's Day</button>
        <button class="filter-btn" data-filter="Father's Day">Father's Day</button>
        <button class="filter-btn" data-filter="Summer">Summer</button>
        <button class="filter-btn" data-filter="Halloween">Halloween</button>
        <button class="filter-btn" data-filter="Thanksgiving">Thanksgiving</button>
        <button class="filter-btn" data-filter="Winter Holidays">Winter Holidays</button>
        <button class="filter-btn" data-filter="Birthday">Birthday</button>
        <button class="filter-btn" data-filter="Just Because">Just Because</button>
      </div>

      <!-- Gallery Grid -->
      <div class="gallery-grid" id="comics-gallery">
        <!-- Comics will be loaded dynamically from comics.json -->
        <p class="text-secondary text-center" style="grid-column: 1 / -1;">Loading comics...</p>
      </div>
    </div>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" role="dialog" aria-modal="true" aria-label="Image viewer">
    <div class="lightbox-content">
      <button class="lightbox-close" aria-label="Close">&times;</button>
      <button class="lightbox-nav lightbox-prev" aria-label="Previous image">&lsaquo;</button>
      <img src="" alt="">
      <button class="lightbox-nav lightbox-next" aria-label="Next image">&rsaquo;</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <nav class="footer-links">
          <a href="https://www.etsy.com/shop/LeftUnattendedComics" target="_blank" rel="noopener">Etsy</a>
          <a href="https://www.lulu.com/spotlight/leftunattended" target="_blank" rel="noopener">Lulu</a>
          <a href="https://www.linkedin.com/in/jencomstock/" target="_blank" rel="noopener">LinkedIn</a>
          <a href="https://www.instagram.com/jensdigz/" target="_blank" rel="noopener">Instagram</a>
        </nav>
        <p class="footer-copyright">&copy; 2026 Jen Comstock. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="assets/js/main.js"></script>
  <script>
    // Load comics from JSON
    (function() {
      const gallery = document.getElementById('comics-gallery');

      fetch('data/comics.json')
        .then(response => response.json())
        .then(comics => {
          // Sort by year (newest first), then alphabetically
          comics.sort((a, b) => {
            if (b.year !== a.year) return (b.year || 0) - (a.year || 0);
            return a.title.localeCompare(b.title);
          });

          gallery.innerHTML = comics.map(comic => `
            <div class="gallery-item" data-category="${comic.category}">
              <img
                src="assets/images/comics/${comic.filename}"
                alt="${comic.title}"
                data-full-src="assets/images/comics/${comic.filename}"
                loading="lazy"
              >
              <span class="gallery-caption">${comic.title}</span>
            </div>
          `).join('');

          // Re-initialize gallery handlers after loading
          initGalleryHandlers();
        })
        .catch(error => {
          console.error('Error loading comics:', error);
          gallery.innerHTML = '<p class="text-secondary text-center" style="grid-column: 1 / -1;">Unable to load comics. Please try again later.</p>';
        });

      function initGalleryHandlers() {
        const galleryItems = document.querySelectorAll('.gallery-item');
        const lightbox = document.querySelector('.lightbox');
        const lightboxImg = lightbox.querySelector('img');

        function getVisibleImages() {
          const items = document.querySelectorAll('.gallery-item:not([style*="display: none"])');
          return Array.from(items).map(item => {
            const img = item.querySelector('img');
            return {
              src: img.dataset.fullSrc || img.src,
              alt: img.alt
            };
          });
        }

        galleryItems.forEach(item => {
          item.addEventListener('click', function() {
            const visibleImages = getVisibleImages();
            const img = item.querySelector('img');
            const visibleIndex = visibleImages.findIndex(i =>
              i.src === (img.dataset.fullSrc || img.src)
            );
            if (window.openLightbox) {
              window.openLightbox(visibleImages, visibleIndex >= 0 ? visibleIndex : 0);
            }
          });

          item.setAttribute('tabindex', '0');
          item.setAttribute('role', 'button');
          item.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              item.click();
            }
          });
        });

        // Initialize filter buttons
        const filterBtns = document.querySelectorAll('.filter-btn');
        filterBtns.forEach(function(btn) {
          btn.addEventListener('click', function() {
            const filter = btn.dataset.filter;

            // Update active state
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Filter items
            galleryItems.forEach(function(item) {
              const category = item.dataset.category;
              if (filter === 'all' || category === filter) {
                item.style.display = '';
              } else {
                item.style.display = 'none';
              }
            });
          });
        });
      }
    })();
  </script>
</body>
</html>
